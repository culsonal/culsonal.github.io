export const make_delunay_tris_from_pts=t=>{const e=[...t];let[s,h,l,o]=[0,0,0,e.length/2];for(let t=0;t<o;t++)[s,h]=[s+e[2*t]/o,h+e[2*t+1]/o];for(let t=0;t<o;t++)l=Math.max(l,((e[2*t]-s)**2+(e[2*t+1]-h)**2)**.5);l+=.2*l;const[a,r]=[s+2*l,h+l],[n,c]=[s+l*Math.sqrt(.5),h-l*Math.sqrt(.5)],d=(s-a)/(n-a),[f,p]=[a+d*(n-a),r+d*(c-r)],[u,M]=[s-l*Math.sqrt(.5),h-l*Math.sqrt(.5)],q=(r-p)/(M-p),[i,_]=[f+q*(u-f),p+q*(M-p)];let g=[[o,o+1,o+2],[0,o,o+1],[0,o+1,o+2],[0,o,o+2]];e.push(a,r,f,p,i,_);for(let t=1;t<o;t++){const s=[g[0]],h=new Set;for(let l=1;l<g.length;l++){const[o,a,r]=g[l],[n,c,d]=[e[2*o],e[2*a],e[2*r]],[f,p,u]=[e[2*o+1],e[2*a+1],e[2*r+1]],[M,q,i]=[n*n+f*f,c*c+p*p,d*d+u*u],_=n*(p-u)-f*(c-d)+c*u-d*p,m=M*(u-p)+q*(f-u)+i*(p-f),x=M*(c-d)+q*(d-n)+i*(n-c),k=M*(d*p-c*u)+q*(n*u-d*f)+i*(c*f-n*p),[w,y,E]=[-m/(2*_),-x/(2*_),Math.sqrt((m*m+x*x-4*_*k)/(4*_*_))];if(((w-e[2*t])**2+(y-e[2*t+1])**2)**.5<E){const t=o<a?o+","+a:a+","+o,e=a<r?a+","+r:r+","+a,s=r<o?r+","+o:o+","+r;h.has(t)?h.delete(t):h.add(t),h.has(e)?h.delete(e):h.add(e),h.has(s)?h.delete(s):h.add(s)}else s.push([o,a,r])}g=s,h.forEach((e=>{const[s,h]=e.split(",");g.push([t,s,h])}))}e.splice(2*o,6);const m=[];for(let t=0;t<g.length;t++){const[e,s,h]=g[t];e<o&&s<o&&h<o&&m.push([e,s,h])}return m};

